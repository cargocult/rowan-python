.. currentmodule:: rowan.core.controllers

Basic Controllers
=================

Rowan provides a basic set of controllers out of the box. These controllers 
cover the basic compositional needs of a tree structure. There could be
many tens of other controllers with more specific needs, and even with
those there would be a large number of controllers that need to be
written new for each project, because they contain project specific logic.

This set is intended to provide the bare-bones structure.

Fallback
********

The :class:`Fallback` controller keeps a set of children, and tries
each one in turn, returning when one gives a valid response.

It can determine what constitutes a valid response by looking at the
HTTP status codes generated by its children.

API
---

.. automodule:: rowan.core.controllers.fallback

.. autoclass:: rowan.core.controllers.fallback.Fallback
   :members:
   :undoc-members:


Parameter Setting
*****************

The :class:`SetParams` controller sets some context before calling its
child. It also handles undoing the set context after the child
returns, even if the child raises an error.

API
---

.. automodule:: rowan.core.controllers.set_params

.. autoclass:: rowan.core.controllers.set_params.SetParams
   :members:
   :undoc-members:


Routing URLS
************

The :class:`Router` controller maps URL regular expressions to
controllers.

API
---

.. automodule:: rowan.core.controllers.router

.. autoclass:: rowan.core.controllers.router.Router
   :members:
   :undoc-members:


Error Handling
**************

The :class:`ErrorHandler` controller usually sits near the root of the
tree. If its child controller raises an error, it will turn it into a
response with the same status code.

The output of this controller is therefore guaranteed to be a response
and not an error (hence the logic of having it at or near the root of the
tree - certainly before anything that might fail).

The error messages this class returns are deliberately terse.

API
---

.. automodule:: rowan.core.controllers.error_handler

.. autoclass:: rowan.core.controllers.error_handler.ErrorHandler
   :members:
   :undoc-members:
