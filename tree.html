<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Rowan Tree &mdash; Rowan v0.1 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Rowan v0.1 documentation" href="index.html" />
    <link rel="next" title="Basic Controllers" href="controllers.html" />
    <link rel="prev" title="Rowan Microframework" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="controllers.html" title="Basic Controllers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Rowan Microframework"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Rowan v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-rowan-tree">
<h1>The Rowan Tree<a class="headerlink" href="#the-rowan-tree" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-contract">
<h2>The Contract<a class="headerlink" href="#the-contract" title="Permalink to this headline">¶</a></h2>
<p>The tree works because each controller has the same structure, or contract.
Controllers can therefore be reused where ever they are needed in the tree.</p>
<div class="section" id="request-and-response">
<h3>Request and Response<a class="headerlink" href="#request-and-response" title="Permalink to this headline">¶</a></h3>
<p>Each controller is a Python callable that takes a
<a title="rowan.core.http.HttpRequest" class="reference external" href="http.html#rowan.core.http.HttpRequest"><tt class="xref docutils literal"><span class="pre">HttpRequest</span></tt></a> object as an argument, and either returns a
<a title="rowan.core.http.HttpResponse" class="reference external" href="http.html#rowan.core.http.HttpResponse"><tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt></a> object, or raises a
<a title="rowan.core.http.HttpError" class="reference external" href="http.html#rowan.core.http.HttpError"><tt class="xref docutils literal"><span class="pre">HttpError</span></tt></a>. Returning a response indicates that the
controller has handled the request (even if the response it is returning
represents some problem, such as a 404 page). Raising an error indicates that
something went wrong, but the controller isn&#8217;t capable of turning it into a
valid response. Normally this bubbles up the tree until a controller is found
that either has some fallback behavior, or else can turn a raised error into an
error message in a regular <tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt>.</p>
</div>
<div class="section" id="children">
<h3>Children<a class="headerlink" href="#children" title="Permalink to this headline">¶</a></h3>
<p>The section above describes the complete extent of the contract for leaves in
the tree. Controllers that manage a subtree should also have a <tt class="xref docutils literal"><span class="pre">children</span></tt>
attribute defined on the callable. This should return a (possibly empty) list
of the controllers it is currently managing. This allows the tree to be
navigated without executing it, and allows special tasks such as diagramming
the tree to be accomplished.</p>
<p>Controllers represented by classes with a <tt class="xref docutils literal"><span class="pre">__call__()</span></tt> method can simply
define a <tt class="xref docutils literal"><span class="pre">children</span></tt> instance attribute or property. Controllers
represented by functions can use Python&#8217;s ability to have function data, as
follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">view1</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">view2</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="n">view1</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">view2</span><span class="p">]</span>
</pre></div>
</div>
<p>Some controllers may select different children depending on the context, in
this case the <tt class="xref docutils literal"><span class="pre">children</span></tt> attribute should hold all of the possible
children.</p>
<p>In rarer cases there may be an infinite or undecidable set of children. In this
case the <tt class="xref docutils literal"><span class="pre">children</span></tt> mechanism breaks down, and should be omitted.</p>
<p>Any controller without a <tt class="xref docutils literal"><span class="pre">children</span></tt> attribute is considered to be
equivalent to having an attribute containing the empty list. So there&#8217;s no need
to add the attribute to the tree&#8217;s leaves.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">The Rowan Tree</a><ul>
<li><a class="reference external" href="#the-contract">The Contract</a><ul>
<li><a class="reference external" href="#request-and-response">Request and Response</a></li>
<li><a class="reference external" href="#children">Children</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">Rowan Microframework</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="controllers.html"
                                  title="next chapter">Basic Controllers</a></p>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="controllers.html" title="Basic Controllers"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Rowan Microframework"
             >previous</a> |</li>
        <li><a href="index.html">Rowan v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Ian Millington.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>